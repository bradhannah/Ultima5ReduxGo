# Implementation Tracking (Go Code vs. Pseudocode)

Status legend:
- Implemented: code path exists and is wired to runtime.
- Similarity: Identical (logic matches), Similar (core idea present; differences or TODOs), Dissimilar/Not Implemented (missing or diverges materially).

Columns:
- Feature: High‑level area or routine.
- Pseudocode Ref: File/section in docs/ALGOS.
- Code Ref: Go file/function(s).
- Implemented: Yes/No/Partial.
- Similarity: Identical/Similar/Dissimilar.
- Notes: Differences, TODOs, gaps.

## Core Systems

| Implemented | Feature                        | Pseudocode Ref                                                                      | Code Ref                                               | Similarity | Notes                                                                                                                  |
|-------------|--------------------------------|-------------------------------------------------------------------------------------|--------------------------------------------------------|------------|------------------------------------------------------------------------------------------------------------------------|
| Partial     | Look (tile descriptions)       | [Commands.md → Look — Towns/Overworld](./Commands.md#look-—-townsoverworld)         | `internal/references/look.go` (LookReferences)         | Similar    | Loads `LOOK` data and returns descriptions; special tiles (telescope, wells) and trace‑to‑sign logic not visible here. |
| Partial     | Windows/Arrow Slit LoS         | [Fixtures.md → Rare Fixtures & Edge Cases](./Fixtures.md#rare-fixtures--edge-cases) | `internal/map_state/layered_map.go` (comments 170–171) | Similar    | Notes treating windows as opaque unless adjacent; ensure missiles pass and LoS aligns with our table.                  |
| Partial     | Light sources & vision         | [Environment.md → Light Sources & Vision](./Environment.md#light-sources--vision)   | `internal/map_state/lighting.go`                       | Similar    | Torch radius and static light sources exist; tie‑ins to commands/spells not wired.                                     |
| Partial     | Torch duration                 | [Environment.md → Torch Duration](./Environment.md#torch-duration)                  | `internal/map_state/lighting.go`                       | Similar    | `LightTorch()`/`AdvanceTurn()` exist; no UI command to ignite/consume torches wired.                                   |
| Yes         | Vehicle system                 | [VEHICLES.md](../VEHICLES.md)                                                       | `internal/references/vehicle.go`, `internal/map_units/npc_vehicle.go` | Similar    | Complete vehicle system with boarding/exit mechanics, vehicle types, and integration documented. Tests: vehicle action tests. |
| Yes         | Sprite constants (indexes)     | —                                                                                   | `internal/sprites/indexes/sprites.go`                 | Identical  | Complete set of sprite constants including Peaks, terrain types, structures from OLD references. Used by action implementations. |
| Yes         | Tile identification system     | [TILES.md](../TILES.md)                                                            | `internal/references/tile.go`                         | Similar    | Function-based tile checking with Is() pattern for single tiles, specific methods for logical groupings. Data fields converted to functions (IsWalkingPassable, IsOpenable, etc.). |
| No          | RNG & INT saves                | [RNG.md](./RNG.md)                                                                  | —                                                      | —          | No central RNG helpers nor `saveint` equivalents in Go tree.                                                           |
| No          | Field expiration (fieldkill)   | [Combat_Effects.md → Field Expiration](./Combat_Effects.md#field-expiration)        | —                                                      | —          | Missing.                                                                                                               |
| No          | Aiming UI (plraim)             | [Combat_Effects.md → Aiming UI](./Combat_Effects.md#aiming-ui)                      | —                                                      | —          | Missing.                                                                                                               |
| No          | Diagnose post‑hit messaging    | [Combat_Effects.md → Diagnose](./Combat_Effects.md#diagnose)                        | —                                                      | —          | Missing.                                                                                                               |
| No          | Combat field effects (infield) | [Combat_Effects.md → Field Effects](./Combat_Effects.md#field-effects)              | —                                                      | —          | Missing.                                                                                                               |
| No          | Distance helpers               | [Combat_Core.md → Distance Helpers](./Combat_Core.md#distance-helpers)              | —                                                      | —          | A* exists; combat distance helpers not present.                                                                        |

## Commands

| Implemented | Feature        | Map Type | Pseudocode Ref                                                                     | Code Ref                                                                                             | Similarity | Notes                                                                                                                                                                                                                      |
|-------------|----------------|----------|------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Yes         | Jimmy Door     | Small    | [Commands.md → Jimmy](./Commands.md#jimmy)                                         | `cmd/ultimav/gamescene_input_smallmap.go:285` + `internal/game_state/action_jimmy_door.go`           | Similar    | Fixed key consumption logic, added chest support, proper error messages; dungeon ahead-targeting still TODO.                                                                                                               |
| Yes         | Jimmy Door     | Large    | [Commands.md → Jimmy](./Commands.md#jimmy)                                         | `cmd/ultimav/gamescene_input_largemap.go:116` + `internal/game_state/action_jimmy.go`                | Similar    | Uses same logic as small map; directional input implemented; character selection placeholder added.                                                                                                                        |
| No          | Jimmy Door     | Dungeon  | [Commands.md → Jimmy](./Commands.md#jimmy)                                         | —                                                                                                    | —          | Dungeon variant targets ahead tile and supports dungeon chest jimmy odds.                                                                                                                                                  |
| No          | Jimmy Door     | Combat   | [Commands.md → Jimmy](./Commands.md#jimmy)                                         | —                                                                                                    | —          | Not implemented for combat maps.                                                                                                                                                                                           |
| Partial     | Open           | Small    | [Commands.md → Open — Towns/Overworld](./Commands.md#open-—-townsoverworld)        | `cmd/ultimav/gamescene_input_smallmap.go:252` + `internal/map_state/action_open_door.go`             | Similar    | Door opening with timed closure (2 turns), proper state messages, LB treasure chest special case. Missing: general chest opening, footlocker, portcullis handling. Tests: `action_open_door_test.go`, `doors_test.go`.     |
| Yes         | Open           | Large    | [Commands.md → Open — Towns/Overworld](./Commands.md#open-—-townsoverworld)        | `cmd/ultimav/gamescene_input_largemap.go:68` + `internal/game_state/action_open.go:19-55`            | Similar    | Door opening with proper state responses, item stack detection. Large maps use Enter for most interactions. Missing: comprehensive chest handling. Tests: `action_open_test.go`.                                           |
| No          | Open           | Dungeon  | [Commands.md → Open — Dungeon](./Commands.md#open-—-dungeon)                       | —                                                                                                    | —          | Handles dungeon doors and underfoot chests; integrates with spells (An Sanct/In Ex Por).                                                                                                                                   |
| No          | Open           | Combat   | [Commands.md → Open — Towns/Overworld](./Commands.md#open-—-townsoverworld)        | —                                                                                                    | —          | Not implemented for combat maps.                                                                                                                                                                                           |
| Partial     | Push           | Small    | [Commands.md → Push](./Commands.md#push)                                           | `cmd/ultimav/gamescene_input_smallmap.go:235` + `internal/game_state/action_push.go`                 | Similar    | Push/pull logic with proper floor validation, timed door closure, chair/cannon orientation. Missing: full pushable object set, object presence system. Tests: `action_push_test.go`, `gamescene_push_integration_test.go`. |
| No          | Push           | Large    | [Commands.md → Push](./Commands.md#push)                                           | `cmd/ultimav/gamescene_input_largemap.go:51` + `internal/game_state/action_push.go:86-89`            | —          | "Push what?" only; ActionPushLargeMap returns true stub.                                                                                                                                                                   |
| Partial     | Push           | Combat   | [Commands.md → Push](./Commands.md#push)                                           | `cmd/ultimav/gamescene_input_combat.go:178` + `internal/game_state/action_push.go:91-114`            | Similar    | Basic trap checking, delegates to small map logic. Missing: avatar position mapping, combat-specific positioning, combatant sync. Tests: `gamescene_push_integration_test.go`.                                             |
| No          | Push           | Dungeon  | [Commands.md → Push](./Commands.md#push)                                           | —                                                                                                    | —          | Not implemented for dungeon maps.                                                                                                                                                                                          |
| Partial     | Get            | Small    | [Commands.md → Get — Towns/Overworld](./Commands.md#get-—-townsoverworld)          | `cmd/ultimav/gamescene_input_smallmap.go:260` + `internal/game_state/action_get.go`                  | Similar    | Picks up item stacks, sconces (torch), food with karma hit, crops; broader pickup/chest flows TBD.                                                                                                                         |
| No          | Get            | Large    | [Commands.md → Get — Towns/Overworld](./Commands.md#get-—-townsoverworld)          | `cmd/ultimav/gamescene_input_largemap.go:33`                                                         | —          | “Get what?” only.                                                                                                                                                                                                          |
| No          | Get            | Dungeon  | [Commands.md → Get — Dungeon](./Commands.md#get-—-dungeon)                         | —                                                                                                    | —          | Picks from underfoot opened chest; distinct from surface object pickup.                                                                                                                                                    |
| No          | Get            | Combat   | [Commands.md → Get — Towns/Overworld](./Commands.md#get-—-townsoverworld)          | —                                                                                                    | —          | Not implemented for combat maps.                                                                                                                                                                                           |
| Stub        | Ready          | Small    | [Commands.md → Ready](./Commands.md#ready)                                         | `internal/game_state/action_ready.go`                                                               | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                     |
| Stub        | Ready          | Large    | [Commands.md → Ready](./Commands.md#ready)                                         | `internal/game_state/action_ready.go`                                                               | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                           |
| Stub        | Ready          | Dungeon  | [Commands.md → Ready](./Commands.md#ready)                                         | `internal/game_state/action_ready.go`                                                               | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                           |
| Stub        | Ready          | Combat   | [Commands.md → Ready](./Commands.md#ready)                                         | `internal/game_state/action_ready.go`                                                               | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                           |
| Partial     | Talk           | Small    | [Commands.md → Talk](./Commands.md#talk-freed-npc-nuance)                          | `cmd/ultimav/gamescene_input_smallmap.go:326`                                                        | Dissimilar | Uses linear dialog engine; TLK/merchant flows not integrated yet.                                                                                                                                                          |
| Stub        | Talk           | Large    | [Commands.md → Talk](./Commands.md#talk-freed-npc-nuance)                          | `cmd/ultimav/gamescene_input_largemap.go:80` + `internal/game_state/action_talk.go:35-40`           | Stub       | Returns "Talk-Funny, no response!" per Commands.md specification. Input handler wired. Updated per recent stub implementation. |
| Stub        | Talk           | Dungeon  | [Commands.md → Talk](./Commands.md#talk-freed-npc-nuance)                          | `internal/game_state/action_talk.go:47-52`                                                          | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                |
| Stub        | Talk           | Combat   | [Commands.md → Talk](./Commands.md#talk-freed-npc-nuance)                          | `internal/game_state/action_talk.go:41-46`                                                          | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                |
| Yes         | Klimb          | Small    | [Commands.md → Klimb](./Commands.md#klimb)                                         | `cmd/ultimav/gamescene_input_smallmap.go:177,188` + `internal/game_state/action_klimb.go:9-57`       | Similar    | Complete: ladders/grates up/down with floor validation, directional fence climbing, proper messaging and time advancement. Tests: `action_klimb_test.go`.                                                                  |
| Yes         | Klimb          | Large    | [Commands.md → Klimb](./Commands.md#klimb)                                         | `cmd/ultimav/gamescene_input_largemap.go:33,92` + `internal/game_state/action_klimb.go:59-116`       | Similar    | Complete: mountain climbing with grapple check, dexterity tests, fall damage, proper error messages. Vehicle check implemented, impassable peaks completed. Tests: `action_klimb_test.go`.                                 |
| Yes         | Klimb          | Dungeon  | [Commands.md → Klimb](./Commands.md#klimb)                                         | `internal/game_state/action_klimb.go:118-186`                                                        | Similar    | Complete: ladder up/down with floor transitions, proper messaging. TODOs: bidirectional ladders, combat exit direction setting, floor validation logic.                                                                    |
| Yes         | Klimb          | Combat   | [Commands.md → Klimb](./Commands.md#klimb)                                         | `internal/game_state/action_klimb.go:118-186`                                                        | Similar    | Complete: ladder up/down with floor transitions, proper messaging. TODOs: bidirectional ladders, combat exit direction setting, floor validation logic.                                                                    |
| Yes         | Look           | Small    | [Commands.md → Look](./Commands.md#look)                                           | `cmd/ultimav/gamescene_input_common.go:20` + `cmd/ultimav/gamescene_input_largemap.go:106`           | Similar    | Directional look with LookReferences; small map adds clock time on clocks; dungeon lighting constraints not applied here.                                                                                                  |
| Yes         | Look           | Large    | [Commands.md → Look](./Commands.md#look)                                           | `cmd/ultimav/gamescene_input_common.go:20` + `cmd/ultimav/gamescene_input_largemap.go:106`           | Similar    | Directional look with LookReferences; small map adds clock time on clocks; dungeon lighting constraints not applied here.                                                                                                  |
| No          | Look           | Dungeon  | [Commands.md → Look — Dungeon](./Commands.md#look-—-dungeon)                       | —                                                                                                    | —          | Dungeon look requires light and prints tile‑family descriptions; includes fountain drink prompt and field types.                                                                                                           |
| No          | Look           | Combat   | [Commands.md → Look](./Commands.md#look)                                           | —                                                                                                    | —          | Not implemented for combat maps.                                                                                                                                                                                           |
| Yes         | Pass Turn      | Small    | [Commands.md → Pass Turn (Space)](./Commands.md#pass-turn-space)                   | `cmd/ultimav/gamescene_input_smallmap.go:25,91` + `cmd/ultimav/gamescene_input_largemap.go:20,61,88` | Similar    | Adds “Pass” and calls `FinishTurn()` when in PrimaryInput state.                                                                                                                                                           |
| Yes         | Pass Turn      | Large    | [Commands.md → Pass Turn (Space)](./Commands.md#pass-turn-space)                   | `cmd/ultimav/gamescene_input_smallmap.go:25,91` + `cmd/ultimav/gamescene_input_largemap.go:20,61,88` | Similar    | Adds “Pass” and calls `FinishTurn()` when in PrimaryInput state.                                                                                                                                                           |
| No          | Pass Turn      | Dungeon  | [Commands.md → Pass Turn (Space)](./Commands.md#pass-turn-space)                   | `cmd/ultimav/gamescene_input.go` (no Dungeon handler)                                                | —          | Should advance dungeon hazards/lighting per tick.                                                                                                                                                                          |
| No          | Pass Turn      | Combat   | [Commands.md → Pass Turn (Space)](./Commands.md#pass-turn-space)                   | —                                                                                                    | —          | Not implemented for combat maps.                                                                                                                                                                                           |
| Stub        | Hole Up & Camp | Small    | [Commands.md → Hole Up & Camp](./Commands.md#hole-up--camp)                        | `internal/game_state/action_hole_up.go`                                                              | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                         |
| Stub        | Hole Up & Camp | Large    | [Commands.md → Hole Up & Camp](./Commands.md#hole-up--camp)                        | `internal/game_state/action_hole_up.go`                                                              | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                                                                           |
| Stub        | Hole Up & Camp | Dungeon  | [Commands.md → Hole Up & Camp](./Commands.md#hole-up--camp)                        | `internal/game_state/action_hole_up.go`                                                              | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                                                                           |
| Stub        | Hole Up & Camp | Combat   | [Commands.md → Hole Up & Camp](./Commands.md#hole-up--camp)                        | `internal/game_state/action_hole_up.go`                                                              | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                                                                           |
| Yes         | Board          | Small    | [Commands.md → Board](./Commands.md#board)                                         | `cmd/ultimav/gamescene_input_*map.go` + `internal/game_state/action_board.go`                        | Similar    | Complete: boards vehicles at position with proper validation, dungeon checks, vehicle type messages, time advancement. Tests: `action_board_test.go`, `action_board_exit_integration_test.go`.                             |
| Yes         | Board          | Large    | [Commands.md → Board](./Commands.md#board)                                         | `cmd/ultimav/gamescene_input_*map.go` + `internal/game_state/action_board.go`                        | Similar    | Complete: boards vehicles at position with proper validation, dungeon checks, vehicle type messages, time advancement. Tests: `action_board_test.go`, `action_board_exit_integration_test.go`.                             |
| No          | Board          | Dungeon  | [Commands.md → Board](./Commands.md#board)                                         | —                                                                                                    | —          | Not applicable to dungeon maps.                                                                                                                                                                                            |
| No          | Board          | Combat   | [Commands.md → Board](./Commands.md#board)                                         | —                                                                                                    | —          | Not applicable to combat maps.                                                                                                                                                                                             |
| Yes         | Exit           | Small    | [Commands.md → Exit](./Commands.md#exit-leave-buildingtown)                        | `cmd/ultimav/gamescene_input_*map.go` + `internal/game_state/action_exit.go`                         | Similar    | Complete: exits vehicles with proper validation, vehicle type messages, time advancement. Tests: `action_exit_test.go`, `action_board_exit_integration_test.go`.                                                           |
| Yes         | Exit           | Large    | [Commands.md → Exit](./Commands.md#exit-leave-buildingtown)                        | `cmd/ultimav/gamescene_input_*map.go` + `internal/game_state/action_exit.go`                         | Similar    | Complete: exits vehicles with proper validation, vehicle type messages, time advancement. Tests: `action_exit_test.go`, `action_board_exit_integration_test.go`.                                                           |
| No          | Exit           | Dungeon  | [Commands.md → Exit](./Commands.md#exit-leave-buildingtown)                        | —                                                                                                    | —          | Not applicable to dungeon maps.                                                                                                                                                                                            |
| No          | Exit           | Combat   | [Commands.md → Exit](./Commands.md#exit-leave-buildingtown)                        | —                                                                                                    | —          | Not applicable to combat maps.                                                                                                                                                                                             |
| No          | Enter          | Small    | [Commands.md → Enter](./Commands.md#enter)                                         | `cmd/ultimav/gamescene_input_smallmap.go:59`                                                         | —          | Negative prompt only: prints “Enter what?”.                                                                                                                                                                                |
| Partial     | Enter          | Large    | [Commands.md → Enter](./Commands.md#enter)                                         | `cmd/ultimav/gamescene_input_largemap.go:52` + `internal/game_state/action_enter.go`                 | Similar    | Enters building when on a world location; small‑map Enter not wired.                                                                                                                                                       |
| No          | Enter          | Dungeon  | [Commands.md → Enter](./Commands.md#enter)                                         | —                                                                                                    | —          | Not applicable to dungeon maps.                                                                                                                                                                                            |
| No          | Enter          | Combat   | [Commands.md → Enter](./Commands.md#enter)                                         | —                                                                                                    | —          | Not applicable to combat maps.                                                                                                                                                                                             |
| Yes         | Ignite Torch   | Small    | [Commands.md → Ignite Torch](./Commands.md#ignite-torch)                           | `cmd/ultimav/gamescene_input_*map.go` + `internal/game_state/action_ignite.go`                       | Similar    | Decrements torches and lights torch; dungeon/visibility interactions elsewhere. Negative: prints “None owned!” if zero.                                                                                                    |
| Yes         | Ignite Torch   | Large    | [Commands.md → Ignite Torch](./Commands.md#ignite-torch)                           | `cmd/ultimav/gamescene_input_*map.go` + `internal/game_state/action_ignite.go`                       | Similar    | Decrements torches and lights torch; dungeon/visibility interactions elsewhere. Negative: prints “None owned!” if zero.                                                                                                    |
| Yes         | Ignite Torch   | Dungeon  | [Commands.md → Ignite Torch](./Commands.md#ignite-torch)                           | `cmd/ultimav/gamescene_input_*map.go` + `internal/game_state/action_ignite.go`                       | Similar    | Decrements torches and lights torch; dungeon/visibility interactions elsewhere. Negative: prints “None owned!” if zero.                                                                                                    |
| Yes         | Ignite Torch   | Combat   | [Commands.md → Ignite Torch](./Commands.md#ignite-torch)                           | `cmd/ultimav/gamescene_input_*map.go` + `internal/game_state/action_ignite.go`                       | Similar    | Decrements torches and lights torch; dungeon/visibility interactions elsewhere. Negative: prints “None owned!” if zero.                                                                                                    |
| Partial     | View (Gem Map) | Small    | [Commands.md → View (Gem Map)](./Commands.md#view-gem-map)                         | `internal/game_state/action_view.go`                                                                 | Similar    | Gem consumption implemented, returns "You have none!" or "View area!". Display logic not yet implemented.                                                                                                              |
| Partial     | View (Gem Map) | Large    | [Commands.md → View (Gem Map)](./Commands.md#view-gem-map)                         | `internal/game_state/action_view.go`                                                                 | Similar    | Gem consumption implemented, returns "You have none!" or "View area!". Display logic not yet implemented.                                                                                                              |
| Partial     | View (Gem Map) | Dungeon  | [Commands.md → View (Gem Map)](./Commands.md#view-gem-map)                         | `internal/game_state/action_view.go`                                                                 | Similar    | Gem consumption implemented, returns "You have none!" or "View dungeon!". Dungeon cell layout rendering not yet implemented.                                                                                          |
| Partial     | View (Gem Map) | Combat   | [Commands.md → View (Gem Map)](./Commands.md#view-gem-map)                         | `internal/game_state/action_view.go`                                                                 | Similar    | Gem consumption implemented, returns "You have none!" or "View area!". Tactical display logic not yet implemented.                                                                                                      |
| Stub        | Ztats          | Small    | [Commands.md → Ztats (Party Member Stats)](./Commands.md#ztats-party-member-stats) | `internal/game_state/action_ztats.go`                                                                | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                               |
| Stub        | Ztats          | Large    | [Commands.md → Ztats (Party Member Stats)](./Commands.md#ztats-party-member-stats) | `internal/game_state/action_ztats.go`                                                                | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                               |
| Stub        | Ztats          | Dungeon  | [Commands.md → Ztats (Party Member Stats)](./Commands.md#ztats-party-member-stats) | `internal/game_state/action_ztats.go`                                                                | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                               |
| Stub        | Ztats          | Combat   | [Commands.md → Ztats (Party Member Stats)](./Commands.md#ztats-party-member-stats) | `internal/game_state/action_ztats.go`                                                                | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                               |
| Stub        | Mix Reagents   | Small    | [Commands.md → Mix Reagents](./Commands.md#mix-reagents)                           | `internal/game_state/action_mix.go`                                                                  | Stub       | Stub implementation with reagent/spells availability check. Input handler wired.                                                                                                                                                                                                           |
| Stub        | Mix Reagents   | Large    | [Commands.md → Mix Reagents](./Commands.md#mix-reagents)                           | `internal/game_state/action_mix.go`                                                                  | Stub       | Stub implementation with reagent/spells availability check. Input handler wired.                                                                                                                                                                                                           |
| Stub        | Mix Reagents   | Dungeon  | [Commands.md → Mix Reagents](./Commands.md#mix-reagents)                           | `internal/game_state/action_mix.go`                                                                  | Stub       | Stub implementation with reagent/spells availability check. Input handler wired.                                                                                                                                                                                                           |
| Stub        | Mix Reagents   | Combat   | [Commands.md → Mix Reagents](./Commands.md#mix-reagents)                           | `internal/game_state/action_mix.go`                                                                  | Stub       | Stub implementation with reagent/spells availability check. Input handler wired.                                                                                                                                                                                                           |
| Stub        | Use            | Small    | [Commands.md → Use](./Commands.md#use)                                             | `cmd/ultimav/gamescene_input_smallmap.go:195-199` + `internal/game_state/action_use.go:7-18`        | Stub       | Returns "Nothing happens." with time advancement. Special items not implemented yet. Input handler wired.                                                                                                                  |
| Stub        | Use            | Large    | [Commands.md → Use](./Commands.md#use)                                             | `cmd/ultimav/gamescene_input_largemap.go:169-173` + `internal/game_state/action_use.go:19-26`       | Stub       | Returns "Nothing happens." with time advancement. Special items not implemented yet. Input handler wired.                                                                                                               |
| Stub        | Use            | Dungeon  | [Commands.md → Use](./Commands.md#use)                                             | `internal/game_state/action_use.go:31-38`                                                           | Stub       | Returns "Nothing happens." with time advancement. Special dungeon items not implemented yet. Input handler wired.                                                                                                       |
| Stub        | Use            | Combat   | [Commands.md → Use](./Commands.md#use)                                             | `internal/game_state/action_use.go:27-31`                                                           | Stub       | Returns "Not now!" during combat. Input handler wired.                                                                                                                                                                  |
| Stub        | Attack         | Small    | [Commands.md → Attack](./Commands.md#attack)                                       | `cmd/ultimav/gamescene_input_smallmap.go:190-194` + `internal/game_state/action_attack.go:7-17`     | Stub       | Returns "Not here!" since combat system not implemented. Input handler wired.                                                                                                                                            |
| Stub        | Attack         | Large    | [Commands.md → Attack](./Commands.md#attack)                                       | `cmd/ultimav/gamescene_input_largemap.go:164-168` + `internal/game_state/action_attack.go:18-24`    | Stub       | Returns "Not here!" since overworld attacks not supported. Input handler wired.                                                                                                                                        |
| Stub        | Attack         | Dungeon  | [Commands.md → Attack](./Commands.md#attack)                                       | `internal/game_state/action_attack.go:30-35`                                                        | Stub       | Returns "Not here!" since combat system not implemented. Input handler wired.                                                                                                                                           |
| Stub        | Attack         | Combat   | [Commands.md → Attack](./Commands.md#attack)                                       | `internal/game_state/action_attack.go:25-30`                                                        | Stub       | Returns "Not yet!" since combat system not implemented. Input handler wired.                                                                                                                                            |
| Stub        | Fire           | Small    | [Commands.md → Fire — Town/Ship](./Commands.md#fire-cannons)                       | `internal/game_state/action_fire.go`                                                                 | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                      |
| Partial     | Fire           | Large    | [Commands.md → Fire — Town/Ship](./Commands.md#fire-cannons)                       | `internal/game_state/action_fire.go`                                                                 | Similar    | Vehicle check implemented with "What?" for non-vehicles. "Fire broadsides only!" for vehicles. Input handler wired.                                                                                                                                                                                                           |
| Stub        | Fire           | Dungeon  | [Commands.md → Fire — Town/Ship](./Commands.md#fire-cannons)                       | `internal/game_state/action_fire.go`                                                                 | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                                                           |
| Stub        | Fire           | Combat   | [Commands.md → Fire — Town/Ship](./Commands.md#fire-cannons)                       | `internal/game_state/action_fire.go`                                                                 | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                                                           |
| Stub        | Cast           | Small    | [Commands.md → Cast](./Commands.md#cast), Spells.md                                | `internal/game_state/action_cast.go`                                                                 | Stub       | Stub implementation with spells availability check. "You don't have any!" response. Input handler wired.                                                                                                   |
| Stub        | Cast           | Large    | [Commands.md → Cast](./Commands.md#cast), Spells.md                                | `internal/game_state/action_cast.go`                                                                 | Stub       | Stub implementation with spells availability check. "You don't have any!" response. Input handler wired.                                                                                                                                                                                                           |
| Partial     | Cast           | Dungeon  | [Commands.md → Cast](./Commands.md#cast), Spells.md                                | `internal/game_state/action_cast.go`                                                                 | Similar    | Spells availability check plus "Not here!" for dungeon context. Input handler wired.                                                                                                                                                                                                           |
| Partial     | Cast           | Combat   | [Commands.md → Cast](./Commands.md#cast), Spells.md                                | `internal/game_state/action_cast.go`                                                                 | Similar    | Spells availability check plus "Not here!" for combat context. Input handler wired.                                                                                                                                                                                                           |
| Stub        | New Order      | Small    | [Commands.md → New Order](./Commands.md#new-order-swap-party-positions)            | `internal/game_state/action_new_order.go`                                                            | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                |
| Stub        | New Order      | Large    | [Commands.md → New Order](./Commands.md#new-order-swap-party-positions)            | `internal/game_state/action_new_order.go`                                                            | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                                                                           |
| Stub        | New Order      | Dungeon  | [Commands.md → New Order](./Commands.md#new-order-swap-party-positions)            | `internal/game_state/action_new_order.go`                                                            | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                                                                           |
| Stub        | New Order      | Combat   | [Commands.md → New Order](./Commands.md#new-order-swap-party-positions)            | `internal/game_state/action_new_order.go`                                                            | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                                                                           |
| Stub        | Fire (Cannons) | Small    | [Commands.md → Fire — Town/Ship](./Commands.md#fire-cannons)                       | `internal/game_state/action_fire.go`                                                                 | Stub       | Stub implementation with TODO comment. Same as Fire command above.                                                                                                                                                                                                           |
| Partial     | Fire (Cannons) | Large    | [Commands.md → Fire — Town/Ship](./Commands.md#fire-cannons)                       | `internal/game_state/action_fire.go`                                                                 | Similar    | Vehicle check implemented. Same as Fire command above.                                                                                                                                                                                                           |
| Stub        | Fire (Cannons) | Dungeon  | [Commands.md → Fire — Town/Ship](./Commands.md#fire-cannons)                       | `internal/game_state/action_fire.go`                                                                 | Stub       | Stub implementation with TODO comment. Same as Fire command above.                                                                                                                                                                                                           |
| Stub        | Fire (Cannons) | Combat   | [Commands.md → Fire — Town/Ship](./Commands.md#fire-cannons)                       | `internal/game_state/action_fire.go`                                                                 | Stub       | Stub implementation with TODO comment. Same as Fire command above.                                                                                                                                                                                                           |
| Stub        | Search         | Small    | [Commands.md → Search](./Commands.md#search)                                       | `cmd/ultimav/gamescene_input_smallmap.go:185-189` + `internal/game_state/action_search.go:7-19`     | Stub       | Returns "Not found!" with time advancement. Stone caches, reagents, and hidden objects not implemented. Input handler wired.                                                                                            |
| Stub        | Search         | Large    | [Commands.md → Search](./Commands.md#search)                                       | `cmd/ultimav/gamescene_input_largemap.go:159-163` + `internal/game_state/action_search.go:20-27`    | Stub       | Returns "Not found!" with time advancement. Search systems not implemented. Input handler wired.                                                                                                                        |
| Stub        | Search         | Dungeon  | [Commands.md → Search — Dungeon](./Commands.md#search-—-dungeon-ahead)             | `internal/game_state/action_search.go:36-60`                                                        | Stub       | Checks for torch light, returns "It's too dark!" if no light, otherwise "Not found!". Secret door search not implemented. Input handler wired.                                                                       |
| Stub        | Search         | Combat   | [Commands.md → Search](./Commands.md#search)                                       | `internal/game_state/action_search.go:28-35`                                                        | Stub       | Returns "Not now!" during combat. Input handler wired.                                                                                                                                                                  |
| Stub        | Yell           | Small    | [Commands.md → Yell](./Commands.md#yell)                                           | `cmd/ultimav/gamescene_input_smallmap.go:200-204` + `internal/game_state/action_yell.go:7-17`       | Stub       | Returns "Not yet!" since shadowlords, sails, and dungeon seal systems not implemented. Input handler wired.                                                                                                             |
| Stub        | Yell           | Large    | [Commands.md → Yell](./Commands.md#yell)                                           | `cmd/ultimav/gamescene_input_largemap.go:174-178` + `internal/game_state/action_yell.go:18-24`      | Stub       | Returns "Not yet!" since Words of Power and dungeon seals not implemented. Input handler wired.                                                                                                                         |
| Stub        | Yell           | Dungeon  | [Commands.md → Yell](./Commands.md#yell)                                           | `internal/game_state/action_yell.go:29-35`                                                          | Stub       | Returns "Not here!" since yelling not allowed in dungeons. Input handler wired.                                                                                                                                        |
| Stub        | Yell           | Combat   | [Commands.md → Yell](./Commands.md#yell)                                           | `internal/game_state/action_yell.go:24-29`                                                          | Stub       | Returns "Not now!" during combat. Input handler wired.                                                                                                                                                                  |
| Stub        | Escape         | Small    | [Commands.md → Escape](./Commands.md#escape)                                       | `internal/game_state/action_escape.go`                                                               | Stub       | Stub implementation with TODO comment. Input handler wired.                                                                                                                                                                              |
| Partial     | Escape         | Large    | [Commands.md → Escape](./Commands.md#escape)                                       | `internal/game_state/action_escape.go`                                                               | Similar    | Dungeon check implemented with "Not here!" response for dungeons. "Not yet!" for other contexts. Input handler wired.                                                                                                                                                                                                           |
| Partial     | Escape         | Dungeon  | [Commands.md → Escape](./Commands.md#escape)                                       | `internal/game_state/action_escape.go`                                                               | Similar    | "Not here!" response for dungeon context. Input handler wired.                                                                                                                                                                                                           |
| Partial     | Escape         | Combat   | [Commands.md → Escape](./Commands.md#escape)                                       | `internal/game_state/action_escape.go`                                                               | Similar    | Dungeon check with "Not here!", victory validation placeholder "Not yet!". Input handler wired.                                                                                                                                                                                                           |

## Fixtures & Environment

| Implemented | Feature                   | Pseudocode Ref                                                           | Code Ref | Similarity | Notes                                         |
|-------------|---------------------------|--------------------------------------------------------------------------|----------|------------|-----------------------------------------------|
| No          | Fixtures: default mapping | [Fixtures.md → Fixture Defaults](./Fixtures.md#fixture-defaults-mapping) | —        | —          | No FixtureEffects map or Use routing present. |
| No          | Wells: Wish               | [Fixtures.md → Wells & Wish](./Fixtures.md#wells--wish)                  | —        | —          | Missing.                                      |
| No          | Fountains                 | [Fixtures.md → Fountains](./Fixtures.md#fountains)                       | —        | —          | Missing.                                      |
| No          | Lamps/Sconces overrides   | [Fixtures.md → Lamps/Sconces](./Fixtures.md#lampssconces-overrides)      | —        | —          | Missing.                                      |
| No          | Overworld hazards         | [Environment.md](./Environment.md)                                       | —        | —          | Missing.                                      |
| No          | Moongates                 | [Moongates.md](./Moongates.md)                                           | —        | —          | Missing.                                      |
| No          | Town drawbridges          | [Towns.md → Drawbridges](./Towns.md#drawbridges)                         | —        | —          | Missing.                                      |

## Schedules & AI

| Implemented | Feature                           | Pseudocode Ref                                                                 | Code Ref                                                 | Similarity | Notes                                                                      |
|-------------|-----------------------------------|--------------------------------------------------------------------------------|----------------------------------------------------------|------------|----------------------------------------------------------------------------|
| Yes         | NPC schedules (data/model)        | [NPC_Schedules.md → Data Model](./NPC_Schedules.md#data-model)                 | `internal/references/npc_schedule.go`                    | Similar    | Schedule model present; details may differ.                                |
| Partial     | NPC schedule driver (hour change) | [NPC_Schedules.md → Hourly Transitions](./NPC_Schedules.md#hourly-transitions) | `internal/ai/npc_ai_controller_small_map.go` (various)   | Similar    | Controller selects behaviors and floors; exact LEAV/ARIV/POP not verbatim. |
| Yes         | Small map pathfinding             | [NPC_Schedules.md → Pathfinding](./NPC_Schedules.md#pathfinding)               | `internal/astar/*.go`, `internal/ai/npc_ai_controller_*` | Similar    | Pathfinding exists; integration with schedules ongoing. Terrain-based movement throttling implemented per Movement_Overworld.md. |
| Yes         | Large map monster generation      | [Movement_Combat_AI.md → Monster Generation](./Movement_Combat_AI.md)          | `internal/ai/npc_ai_controller_large_map.go`            | Similar    | Environment-based monster spawning with tile probability system implemented. Fixed double-gating issue in spawn rates. Terrain-based AI movement with proper tile classification. |
| No          | Combat AI (seek, special moves)   | [Movement_Combat_AI.md](./Movement_Combat_AI.md)                               | —                                                        | —          | Combat not implemented.                                                    |
| No          | Mass charm targeting ('C')        | [Spells.md → Quas An Wis](./Spells.md#quas-an-wis-mass-charmconfusion)         | —                                                        | —          | Not applicable yet.                                                        |

## Spells & Scrolls

| Implemented | Feature                 | Pseudocode Ref                                            | Code Ref                                        | Similarity | Notes                                                |
|-------------|-------------------------|-----------------------------------------------------------|-------------------------------------------------|------------|------------------------------------------------------|
| No          | Spellcasting core       | [Spells.md](./Spells.md)                                  | —                                               | —          | Not present in Go codebase.                          |
| No          | Specific spells/scrolls | [Spells.md (All)](./Spells.md#spells-summary-at-a-glance) | `internal/references/data/InventoryDetails.csv` | —          | Data present for names/info; no runtime casting/use. |

### Spell Inventory Data (FYI)

| Implemented | Feature                     | Pseudocode Ref                                      | Code Ref                                            | Similarity | Notes                                |
|-------------|-----------------------------|-----------------------------------------------------|-----------------------------------------------------|------------|--------------------------------------|
| Yes         | Spell metadata (names/info) | [Spells.md](./Spells.md)                            | `internal/references/data/InventoryDetails.csv`     | N/A        | Data present; no runtime casting.    |
| Partial     | Inventory quantities        | [SAVED_GAM_STRUCTURE.md](../SAVED_GAM_STRUCTURE.md) | `internal/party_state/inventory.go` (Scrolls, etc.) | N/A        | Data structures exist; no use flows. |

### Potions & Scrolls

| Implemented | Feature        | Pseudocode Ref                                                         | Code Ref | Similarity | Notes            |
|-------------|----------------|------------------------------------------------------------------------|----------|------------|------------------|
| No          | Potion effects | [Potions.md](./Potions.md)                                             | —        | —          | Not implemented. |
| No          | Scroll effects | [Spells.md → Scrolls Summary](./Spells.md#scrolls-summary-at-a-glance) | —        | —          | Not implemented. |

## Special Items & Artifacts

| Implemented | Feature/Item       | Pseudocode Ref                                                                     | Code Ref                                          | Similarity | Notes                                          |
|-------------|--------------------|------------------------------------------------------------------------------------|---------------------------------------------------|------------|------------------------------------------------|
| Partial     | Magic Carpet (Use) | [Commands.md → Use](./Commands.md#use)                                             | `internal/map_units/npc_vehicle.go` (carpet type) | Dissimilar | Carpet NPC exists; use/place/pickup logic TBD. |
| No          | Skull Keys (Use)   | [Objects.md → Skull Key — Magical Unlock](./Objects.md#skull-key-—-magical-unlock) | `internal/party_state/inventory.go` (SkullKeys)   | —          | Inventory tracked; no use flow.                |
| No          | Crown (Use)        | [Commands.md → Use](./Commands.md#use)                                             | —                                                 | —          | Not implemented.                               |
| No          | Sceptre (Use)      | [Commands.md → Use](./Commands.md#use)                                             | —                                                 | —          | Not implemented.                               |
| No          | Amulet (Use)       | [Commands.md → Use](./Commands.md#use)                                             | `internal/references/item_equipment.go`           | —          | Item enum exists; effect/use not wired.        |
| No          | Spyglass/Telescope | [Fixtures.md → Telescope](./Fixtures.md#telescope)                                 | —                                                 | —          | Not implemented.                               |
| No          | Gems (View)        | [Commands.md → View (Gem Map)](./Commands.md#view-gem-map)                         | —                                                 | —          | Not implemented.                               |
| Partial     | Torches (Ignite)   | [Commands.md → Ignite Torch](./Commands.md#ignite-torch)                           | `internal/map_state/lighting.go`                  | Similar    | Lighting supports torches; command missing.    |

## Town Systems

| Implemented | Feature                        | Pseudocode Ref                                                         | Code Ref | Similarity | Notes                        |
|-------------|--------------------------------|------------------------------------------------------------------------|----------|------------|------------------------------|
| No          | Guard alarm/pursuit            | [Towns.md → Special Guard Behavior](./Towns.md#special-guard-behavior) | —        | —          | Not implemented.             |
| No          | Jail flow                      | [Towns.md → Jail Flow](./Towns.md#jail-flow)                           | —        | —          | Not implemented.             |
| No          | Cannons (town/ship broadsides) | [Commands.md → Fire](./Commands.md#fire-cannons)                       | —        | —          | Not implemented.             |
| No          | Shops (pricing/services)       | [Shops.md](./Shops.md)                                                 | —        | —          | Pricing tables to be filled. |

## Potions & Scrolls

| Implemented | Feature       | Pseudocode Ref      | Code Ref                                    | Similarity | Notes                                     |
|-------------|---------------|---------------------|---------------------------------------------|------------|-------------------------------------------|
| No          | Potions (use) | Potions.md          | `internal/party_state/inventory.go` (types) | —          | Quantities exist but no use/effect logic. |
| No          | Scrolls (use) | Spells.md (scrolls) | `internal/party_state/inventory.go` (types) | —          | No scroll use flows implemented.          |

## Special Items

| Implemented | Feature            | Pseudocode Ref          | Code Ref                                                     | Similarity | Notes                                                   |
|-------------|--------------------|-------------------------|--------------------------------------------------------------|------------|---------------------------------------------------------|
| No          | Crown (Use)        | Commands.md → Use       | —                                                            | —          | Not implemented.                                        |
| No          | Sceptre (Use)      | Commands.md → Use       | —                                                            | —          | Not implemented.                                        |
| No          | Amulet (Use)       | Commands.md → Use       | `internal/party_state/types.go` (Amulet field)               | —          | Field exists; no use effect logic.                      |
| Partial     | Carpet (Board/Use) | Commands.md → Use/Board | `internal/map_units/npc_vehicle.go` (CarpetVehicle), map use | Dissimilar | Vehicle types exist; no boarding/Use flows as per docs. |
| No          | Spyglass/Telescope | Commands.md → Use/Look  | —                                                            | —          | Not implemented.                                        |
| No          | Gems (View)        | Commands.md → View      | `internal/party_state/inventory.go` (gems qty)               | —          | Quantities exist; View command absent.                  |

## Exhaustive Spell Checklist (48 Spells)

Legend: Implemented = No (unless otherwise noted), Similarity = —, Code Ref column lists any related data structures.

| Implemented | #  | Spell            | Pseudocode Ref | Code Ref                                        | Similarity | Notes                       |
|-------------|----|------------------|----------------|-------------------------------------------------|------------|-----------------------------|
| No          | 0  | In Lor           | Spells.md      | `internal/references/data/InventoryDetails.csv` | —          | —                           |
| No          | 1  | Grav Por         | Spells.md      | same                                            | —          | —                           |
| No          | 2  | An Zu            | Spells.md      | same                                            | —          | —                           |
| No          | 3  | An Nox           | Spells.md      | same                                            | —          | —                           |
| No          | 4  | Mani             | Spells.md      | same                                            | —          | —                           |
| No          | 5  | An Ylem          | Spells.md      | same                                            | —          | —                           |
| No          | 6  | An Sanct         | Spells.md      | same                                            | —          | —                           |
| No          | 7  | An Xen Corp      | Spells.md      | same                                            | —          | —                           |
| No          | 8  | Rel Hur          | Spells.md      | same                                            | —          | —                           |
| No          | 9  | In Wis           | Spells.md      | same                                            | —          | —                           |
| No          | 10 | Kal Xen          | Spells.md      | same                                            | —          | —                           |
| No          | 11 | In Xen Mani      | Spells.md      | same                                            | —          | —                           |
| No          | 12 | Vas Lor          | Spells.md      | same                                            | —          | —                           |
| No          | 13 | Vas Flam         | Spells.md      | same                                            | —          | —                           |
| No          | 14 | In Flam Grav     | Spells.md      | same                                            | —          | —                           |
| No          | 15 | In Nox Grav      | Spells.md      | same                                            | —          | —                           |
| No          | 16 | In Zu Grav       | Spells.md      | same                                            | —          | —                           |
| No          | 17 | In Por           | Spells.md      | same                                            | —          | —                           |
| No          | 18 | An Grav          | Spells.md      | same                                            | —          | —                           |
| No          | 19 | In Sanct         | Spells.md      | same                                            | —          | —                           |
| No          | 20 | In Sanct G       | Spells.md      | same                                            | —          | Energy field create variant |
| No          | 21 | Uus Por          | Spells.md      | same                                            | —          | —                           |
| No          | 22 | Des Por          | Spells.md      | same                                            | —          | —                           |
| No          | 23 | Wis Quas         | Spells.md      | same                                            | —          | —                           |
| No          | 24 | In Bet Xen       | Spells.md      | same                                            | —          | —                           |
| No          | 25 | An Ex Por        | Spells.md      | same                                            | —          | —                           |
| No          | 26 | In Ex Por        | Spells.md      | same                                            | —          | —                           |
| No          | 27 | Vas Mani         | Spells.md      | same                                            | —          | —                           |
| No          | 28 | In Zu            | Spells.md      | same                                            | —          | —                           |
| No          | 29 | Rel Tym          | Spells.md      | same                                            | —          | —                           |
| No          | 30 | In Vas Por Ylem  | Spells.md      | same                                            | —          | —                           |
| No          | 31 | Quas An Wis      | Spells.md      | same                                            | —          | Mass charm aura             |
| No          | 32 | In An            | Spells.md      | same                                            | —          | Negate magic                |
| No          | 33 | Wis An Ylem      | Spells.md      | same                                            | —          | X‑Ray                       |
| No          | 34 | An Xen Ex        | Spells.md      | same                                            | —          | —                           |
| No          | 35 | Rel Xen Bet      | Spells.md      | same                                            | —          | Polymorph                   |
| No          | 36 | Sanct Lor        | Spells.md      | same                                            | —          | Invisibility                |
| No          | 37 | Xen Corp         | Spells.md      | same                                            | —          | —                           |
| No          | 38 | In Quas Xen      | Spells.md      | same                                            | —          | Clone                       |
| No          | 39 | In Quas Wis      | Spells.md      | same                                            | —          | View                        |
| No          | 40 | In Nox Hur       | Spells.md      | same                                            | —          | Poison storm                |
| No          | 41 | In Quas Corp     | Spells.md      | same                                            | —          | Fear                        |
| No          | 42 | In Mani Corp     | Spells.md      | same                                            | —          | Resurrection                |
| No          | 43 | Kal Xen Corp     | Spells.md      | same                                            | —          | Summon daemon               |
| No          | 44 | In Vas Grav Corp | Spells.md      | same                                            | —          | Energy storm                |
| No          | 45 | In Flam Hur      | Spells.md      | same                                            | —          | Firestorm                   |
| No          | 46 | Vas Rel Por      | Spells.md      | same                                            | —          | Gate Travel                 |
| No          | 47 | An Tym           | Spells.md      | same                                            | —          | Negate Time                 |
| No          | 48 | Frotz (reserved) | Spells.md      | same                                            | —          | Unimplemented               |

## Scrolls Checklist (8)

| Implemented | Scroll        | Pseudocode Ref | Code Ref                                    | Similarity | Notes |
|-------------|---------------|----------------|---------------------------------------------|------------|-------|
| No          | Light         | Spells.md      | `internal/party_state/inventory.go` (types) | —          | —     |
| No          | Wind Change   | Spells.md      | same                                        | —          | —     |
| No          | Protection    | Spells.md      | same                                        | —          | —     |
| No          | Negate Magic  | Spells.md      | same                                        | —          | —     |
| No          | View          | Spells.md      | same                                        | —          | —     |
| No          | Summon Daemon | Spells.md      | same                                        | —          | —     |
| No          | Resurrection  | Spells.md      | same                                        | —          | —     |
| No          | Negate Time   | Spells.md      | same                                        | —          | —     |

## Potions Checklist (8)

| Implemented | Potion Color | Pseudocode Ref | Code Ref                                    | Similarity | Notes              |
|-------------|--------------|----------------|---------------------------------------------|------------|--------------------|
| No          | Blue         | Potions.md     | `internal/party_state/inventory.go` (types) | —          | Cure Sleep         |
| No          | Yellow       | Potions.md     | same                                        | —          | Heal               |
| No          | Red          | Potions.md     | same                                        | —          | Cure Poison        |
| No          | Green        | Potions.md     | same                                        | —          | Poison             |
| No          | Orange       | Potions.md     | same                                        | —          | Sleep              |
| No          | Purple       | Potions.md     | same                                        | —          | Polymorph (combat) |
| No          | Black        | Potions.md     | same                                        | —          | Invisible (combat) |
| No          | White        | Potions.md     | same                                        | —          | X‑Ray (surface)    |

## Special Items Checklist

| Implemented | Item                  | Pseudocode Ref       | Code Ref                                            | Similarity | Notes                                      |
|-------------|-----------------------|----------------------|-----------------------------------------------------|------------|--------------------------------------------|
| No          | Crown of Lord British | Commands.md → Use    | —                                                   | —          | —                                          |
| No          | Sceptre of Lord Brit. | Commands.md → Use    | —                                                   | —          | —                                          |
| No          | Amulet of LB          | Commands.md → Use    | `internal/party_state/types.go` (Amulet field)      | —          | Field present only                         |
| Partial     | Magic Carpet          | Commands.md → Use    | `internal/map_units/npc_vehicle.go` (CarpetVehicle) | Dissimilar | Vehicle type present; no Use/boarding flow |
| No          | Skull Keys            | Commands.md → Use    | —                                                   | —          | —                                          |
| No          | Keys                  | Commands.md → Open   | `internal/party_state/inventory.go` (keys qty)      | —          | No Open/door flows                         |
| No          | Torches               | Commands.md → Ignite | `internal/party_state/inventory.go` (torches qty)   | —          | No Ignite Torch command                    |
| No          | Gems                  | Commands.md → View   | `internal/party_state/inventory.go` (gems qty)      | —          | View not implemented                       |
| No          | Spyglass              | Commands.md → Use    | —                                                   | —          | —                                          |
| No          | Telescope             | Commands.md → Look   | —                                                   | —          | —                                          |

## Towns & Special Systems

| Implemented | Feature                | Pseudocode Ref                      | Code Ref | Similarity | Notes      |
|-------------|------------------------|-------------------------------------|----------|------------|------------|
| No          | Drawbridges/Portcullis | Towns.md                            | —        | —          | Not found. |
| No          | Guard alarm & Jail     | Towns.md → Guard Behavior/Jail      | —        | —          | Not found. |
| No          | Cannons (town fire)    | Combat_Effects.md/Towns.md          | —        | —          | Not found. |
| No          | Bridge trolls          | Special_BridgeTrolls.md             | —        | —          | Not found. |
| No          | Wind system            | Movement_Overworld.md → Wind System | —        | —          | Not found. |
| No          | Ships & Sails          | Commands.md / Movement_Overworld.md | —        | —          | Not found. |
| No          | Moongates              | Moongates.md                        | —        | —          | Not found. |

## Shops & Economy

| Implemented | Feature                    | Pseudocode Ref       | Code Ref                                                            | Similarity | Notes                                                                                                |
|-------------|----------------------------|----------------------|---------------------------------------------------------------------|------------|------------------------------------------------------------------------------------------------------|
| No          | Shop pricing & multipliers | Shops.md             | —                                                                   | —          | Tables added in docs; not implemented in code.                                                       |
| No          | Reagent/Healer/Arms Shops  | Shops.md             | —                                                                   | —          | Not present.                                                                                         |
| No          | Inns (stay months)         | Shops.md → Innkeeper | `internal/party_state/types.go` (MonthsAtInn, PartyStatus=AtTheInn) | —          | Data fields present; no inn UI/flow, no gold deduction, no time advancement, no `inn_party` mapping. |
| No          | Horses/Shipwright          | Shops.md             | —                                                                   | —          | Not present.                                                                                         |

## Conversation System (FYI)

| Implemented | Feature              | Pseudocode Ref           | Code Ref                                          | Similarity | Notes                                        |
|-------------|----------------------|--------------------------|---------------------------------------------------|------------|----------------------------------------------|
| Yes         | Talk engine (linear) | TALK_SYSTEM_STRUCTURE.md | `internal/conversation/linear_engine.go` (+tests) | Similar    | Robust implementation; outside combat scope. |

---

## Recent Updates (August 2025)

**Data-to-Function Architecture Migration**: 
- Converted tile passability from JSON data fields to function-based logic (`IsWalkingPassable()`, `IsOpenable()`, `IsRangeWeaponPassable()`)
- Implemented consistent tile identification patterns: generic `Is()` for single tiles, specific methods for logical groupings
- Updated all tile checking functions to use consistent patterns per coding conventions
- Benefits: Better maintainability, clearer logic, follows established patterns

**Command System Completion**:
- Implemented stub responses for all missing command variants (Talk/Search/Attack/Use/Yell across all map types)
- All commands now have proper input handlers and SystemCallbacks integration
- Proper time advancement and context-appropriate responses implemented
- Commands follow consistent Action pattern with separated UI/GameState concerns

**AI System Improvements**:
- Enhanced terrain-based monster movement with proper tile classification (heavy/difficult terrain)
- Fixed monster spawn probability system with tile-based calculation
- Implemented environment-based monster selection with weighted random distribution
- Updated tile checking to use function-based patterns throughout AI systems

**Documentation Updates**:
- TILES.md updated with comprehensive pattern guide and coding conventions
- Implementation tracking updated to reflect current system state
- All recent changes documented with proper code references

---

This tracker is a starting point. As features land in Go code, update the "Implemented" and "Similarity" columns, and add concrete function references.

## Sleep & Rest (Overview)

| Implemented | Feature               | Pseudocode Ref                                                                                   | Code Ref                                         | Similarity | Notes                                                                                                            |
|-------------|-----------------------|--------------------------------------------------------------------------------------------------|--------------------------------------------------|------------|------------------------------------------------------------------------------------------------------------------|
| No          | Sleep status effect   | Combat_Effects.md → Field Effects, Per‑Turn Updates; Potions.md (Blue/Orange); Spells.md (In Zu) | `internal/party_state/mappings.go` (Status enum) | —          | Status enum includes Sleep; no application/expiration logic, no wake/cure handling wired.                        |
| No          | Sleep field (tiles)   | Combat_Effects.md → Field Effects                                                                | —                                                | —          | Combat field effects not implemented; would apply Sleep on contact (PCs/monsters).                               |
| No          | In Zu (Sleep spell)   | Spells.md                                                                                        | —                                                | —          | Listed in spells table; no casting/effect pipeline.                                                              |
| No          | Potions: Blue/Orange  | Potions.md                                                                                       | `internal/party_state/inventory.go` (types only) | —          | Blue cures Sleep; Orange applies Sleep; items exist as types only.                                               |
| No          | Hole Up & Camp (rest) | Commands.md → Hole Up & Camp                                                                     | —                                                | —          | Camping/repair flows absent; should handle guard watch, time advance, HP/MP regen, food ticks, encounter checks. |
| No          | In‑bed sleep/ejection | Fixtures.md → Beds; NPC_Schedules.md (eject sleepers at schedule boundaries)                     | —                                                | —          | No in‑bed sleep flow; must prevent sleeping in occupied beds and eject sleepers around hour changes.             |
